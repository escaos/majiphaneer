export type Locale = "es" | "en";

type Dictionary = Record<string, string>;

const es: Dictionary = {
	home: "Inicio",
	about: "Sobre m√≠",
	book: "Mi libro",
	blog: "Blog",
	projects: "Proyectos",
	contact: "Contacto",
	social_networks: "Redes sociales",
	cta_listen: "Escuchar ahora",
	cta_contact: "Contacto",
	cta_meet: "Con√≥ceme",
	cta_book: "Mi libro: Contrav√≠a",
	cta_follow: "S√≠gueme en redes",
	send: "Enviar",
	name: "Nombre",
	email: "Correo electr√≥nico",
	message: "Mensaje",
	hero_title: "MAJI PHANEER",
	hero_statement1: "üåø Comunico fe con prop√≥sito y autenticidad.",
	hero_statement2:
		"Porque la verdad de Jes√∫s sigue siendo suficiente‚Ä¶ solo hay que volver a mirarla de cerca.",
	hero_sub1: "Soy Maji Phaneer: comunicadora, pastora y autora.",
	hero_sub2:
		"Acompa√±o a personas a redescubrir su fe desde un lugar real, honesto y lleno de gracia.",
	footer_rights: "Todos los derechos reservados.",
	back_to_top: "Volver arriba",
	// About
	about_h1_l1: "No quiero solo hablar de fe.",
	about_h1_l2: "Quiero vivirla, comunicar y acompa√±arte a hacerlo tambi√©n.",
	about_p1:
		"Soy Maji Phaneer, comunicadora, pastora y autora. Desde muy joven supe que mi llamado no era construir plataformas, sino formar corazones.",
	about_p2:
		"A trav√©s de mis redes, libros y proyectos, busco recordarle al mundo que seguir a Jes√∫s no es una moda‚Ä¶ es una forma de vivir.",
	about_p3:
		"Mi mensaje nace de lo secreto, de la vida diaria, y de un amor profundo por la verdad.",
	about_p4: "Creo en una fe que piensa, que siente, que sana y que se expresa con autenticidad.",
	values_title: "Mis valores",
	values_list: "Verdad, Empat√≠a, Gratitud, Radicalidad con amor, Integridad.",
	purpose_title: "Mi prop√≥sito",
	purpose_text: "Inspirar a una generaci√≥n a vivir su fe con coherencia, gracia y valent√≠a.",
	// Book
	book_quote: "‚ÄúCuando obedecer a Dios es ir contra la corriente.‚Äù",
	book_p1:
		"Contrav√≠a no es solo un libro sobre liderazgo; es un llamado a volver al coraz√≥n del servicio.",
	book_p2:
		"Es una conversaci√≥n honesta con quienes alguna vez sintieron el peso de servir a Dios, y se preguntaron si lo estaban haciendo bien.",
	book_p3:
		"Este libro es una confrontaci√≥n amorosa. Una invitaci√≥n a despojarse del ego espiritual y recuperar la esencia: servir como Jes√∫s, no solo hablar de √âl.",
	book_testimonial:
		"‚ÄúEste libro me hizo replantearme la forma en que sirvo. Me record√≥ que liderar no se trata de poder, sino de amor.‚Äù ‚Äî Lectora an√≥nima",
	book_discover: "Descubre Contrav√≠a",
	book_buy: "C√≥mpralo aqu√≠",
	// Blog
	blog_title: "Palabras que nacen desde lo secreto, para acompa√±arte en tu proceso.",
	blog_intro:
		"Aqu√≠ comparto pensamientos, reflexiones y verdades que Dios me ha ido ense√±ando en el camino. Son textos para detenerte, respirar, y recordar que no est√°s sola en tu fe.",
	// Projects
	projects_title: "Donde la fe se hace conversaci√≥n.",
	projects_item1_title: "üé• Desintoxica tu alma",
	projects_item1_desc:
		"Una serie sobre salud digital y fe real. Para los que quieren cuidar su mente sin descuidar su esp√≠ritu.",
	projects_item2_title: "üé§ Conferencias y Charlas",
	projects_item2_desc:
		"Mensajes que despiertan, inspiran y confrontan con amor. Si deseas invitarme a tu evento:",
	projects_invite: "Inv√≠tame a hablar",
};

const en: Dictionary = {
	home: "Home",
	about: "About",
	book: "Book",
	blog: "Blog",
	projects: "Projects",
	contact: "Contact",
	social_networks: "Social Networks",
	cta_listen: "Listen now",
	cta_contact: "Contact",
	cta_meet: "About me",
	cta_book: "My book: Contrav√≠a",
	cta_follow: "Follow me",
	send: "Send",
	name: "Name",
	email: "Email",
	message: "Message",
	hero_title: "MAJI PHANEER",
	hero_statement1: "üåø I communicate faith with purpose and authenticity.",
	hero_statement2: "The truth of Jesus is still enough‚Ä¶ we just need to look closely again.",
	hero_sub1: "I'm Maji Phaneer: communicator, pastor and author.",
	hero_sub2: "I help people rediscover their faith from a real, honest, grace-filled place.",
	footer_rights: "All rights reserved.",
	back_to_top: "Back to top",
	// About
	about_h1_l1: "I don't want to just talk about faith.",
	about_h1_l2: "I want to live it, communicate it, and walk with you too.",
	about_p1:
		"I'm Maji Phaneer, communicator, pastor and author. From a young age I knew my calling wasn't to build platforms, but to form hearts.",
	about_p2:
		"Through my networks, books and projects, I remind the world that following Jesus isn't a trend‚Äîit's a way of life.",
	about_p3:
		"My message is born from the secret place, from daily life, and from a deep love for truth.",
	about_p4:
		"I believe in a faith that thinks, feels, heals, and expresses itself with authenticity.",
	values_title: "My values",
	values_list: "Truth, Empathy, Gratitude, Loving boldness, Integrity.",
	purpose_title: "My purpose",
	purpose_text: "Inspire a generation to live their faith with coherence, grace, and courage.",
	// Book
	book_quote: "‚ÄúWhen obeying God means going against the current.‚Äù",
	book_p1:
		"Contrav√≠a is not just a book about leadership; it's a call to return to the heart of service.",
	book_p2:
		"An honest conversation for those who have felt the weight of serving God and wondered if they were doing it right.",
	book_p3:
		"It's a loving confrontation. An invitation to strip away spiritual ego and recover the essence: serve like Jesus, not just speak about Him.",
	book_testimonial:
		"‚ÄúThis book made me rethink how I serve. It reminded me that leading is not about power, but love.‚Äù ‚Äî Anonymous reader",
	book_discover: "Discover Contrav√≠a",
	book_buy: "Buy it here",
	// Blog
	blog_title: "Words born in secret, to accompany you on the way.",
	blog_intro:
		"Here I share thoughts, reflections and truths God has been teaching me. Texts to pause, breathe, and remember you're not alone in your faith.",
	// Projects
	projects_title: "Where faith becomes conversation.",
	projects_item1_title: "üé• Detox your soul",
	projects_item1_desc:
		"A series about digital health and real faith. For those who want to care for their minds without neglecting their spirit.",
	projects_item2_title: "üé§ Conferences & Talks",
	projects_item2_desc:
		"Messages that awaken, inspire, and lovingly confront. If you'd like to invite me to your event:",
	projects_invite: "Invite me to speak",
};

const dictByLocale: Record<Locale, Dictionary> = { es, en };

let currentLocale: Locale = "es";

export function getLocale(): Locale {
	return currentLocale;
}

export function setLocale(locale: Locale) {
	currentLocale = locale;
	if (typeof globalThis.window !== "undefined") {
		try {
			localStorage.setItem("locale", locale);
		} catch {}
	}
	// Notify listeners
	for (const cb of listeners) cb(locale);
}

export function t(key: keyof typeof es): string {
	return dictByLocale[currentLocale][key] ?? String(key);
}

type Listener = (l: Locale) => void;
const listeners = new Set<Listener>();
export function subscribe(cb: Listener) {
	listeners.add(cb);
	return () => listeners.delete(cb);
}

// React hook for reactive translations
// Using useSyncExternalStore ensures concurrent-safe subscriptions.
// Import is dynamic to keep this file usable outside React as well.
// Consumers in React will tree-shake unused paths.
import * as React from "react";

export function useI18n() {
	const locale = React.useSyncExternalStore(
		(cb: () => void) => {
			const unsub = subscribe(() => cb());
			return () => unsub();
		},
		() => getLocale(),
		() => getLocale(),
	);
	const translate = React.useCallback(
		(key: keyof typeof es) => {
			return dictByLocale[locale][key] ?? String(key);
		},
		[locale],
	);
	return { locale, t: translate, setLocale };
}

// Initialize from storage
if (globalThis.window !== undefined) {
	try {
		const saved = localStorage.getItem("locale") as Locale | null;
		if (saved === "en" || saved === "es") currentLocale = saved;
	} catch {}
}
